<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Benchmarking - Java vs Kotlin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="scribbler-global.css">
    <link rel="stylesheet" href="scribbler-doc.css">
    <link rel="author" href="humans.txt">
    <style type="text/css">
    h5{
      margin-left: 20px;
    }

    </style>
  </head>
  <body>
    <div class="doc__bg"></div>
    <nav class="header">
      <h1 class="logo">Java vs Kotlin <span class="logo__thin">Benchmark</span></h1>
      <ul class="menu">
        <div class="menu__item toggle"><span></span></div>
        <li class="menu__item"><a href="https://github.com/ikbale/ikbale.github.io" target="_blank" class="link link--dark"><i class="fa fa-github"></i> Github</a></li>
        <li class="menu__item"><a href="index.html" class="link link--dark"><i class="fa fa-home"></i> Home</a></li>
      </ul>
    </nav>
    <div class="wrapper">
      <aside class="doc__nav">
        <ul>
          <li class="js-btn selected">Intro</li>
          <li class="js-btn">Language features</li>
          <li class="js-btn">Performances</li>
          <li class="js-btn">Paradigms</li>
          <li class="js-btn">Conclusion  & Credits</li>
        </ul>
      </aside>
      <article class="doc__content">
        <section class="js-section">
          <h3 class="section__title">Intro</h3>
          <p>Let's start with some story time ! <br/>
            Once upon a time, there was a language called Java that was widely used by tech companies-and still- to develop web, desktop and mobile applications with high performance and scalability. For now, let's put our focus on mobile applications as the use of smarthphones became a necessity and especially for android applications because Android OS has the largest install base of any operating system; And it's not just for phones or tablets but also when it comes to smart TVs, cars and smart watches etc ... So that's why I was drawn to make this comparison out of curiosity.</p>
            <p>
            Java has always been the only default programming language in Android until Google announced the new addition to its latest Android  <b>(Android Oreo) </b>: a brand new programming language called <b>Kotlin</b>.
            Kotlin had been under developement for six years by JetBrains since 2011 and the first version v1.0 was released in 2016 after Google decided to partner with JetBrains development team to bring support to Android. </p>
            <p>
            So the question to be raised will be:<br/><br/>
            <q>Java or Kotlin, which is better for Android mobile applications?</q>
            </p>
            <p>
            In order to potentially find a final answer to this question, I decided to lead this comparison by invoking 3 different aspects: performance, language features and paradigms, so I basically focused on the developers experience more.</p>
          <!-- <h3 class="section__title">Installation</h3>
          <div class="code__block code__block--notabs">
            <pre class="code code--block">
              <code>
                $ scribbler  ——config
                  {
                    “encryption”: true, 
                    “highlighting“: true,
                    “prettyTable”: false,
                    “font”: [“Helvetica”, “sans-serif”],
                    “folder”: “~/Desktop“
                  }
              </code>
            </pre>
          </div> -->
        </section>
        <section class="js-section">
          <h3 class="section__title">Language Features</h3>
          <p>Apparently, kotlin was created to try to address some issues that Java has. In this section, I will try to bring up the solutions solved in Kotlin that were once a pain for Android Developers. Here are some important features: </p>
          <table id="customers">
            <tr>
              <th>Feature</th>
              <th>Explications</th>
            </tr>
            <tr>
              <td>Interoperability</td>
              <td>Java and Kotlin are interoperable which means we can find both type of files in the same project as well as they can invoke each others librairies.</td>
            </tr>
            <tr>
              <td>Data Classes</td>
              <td>In Java, in order to write a <b>POJO</b>, you have to declare the fields, write the constructor and also the getters and the setters of all attributes, too much code isn't it? Well, in Kotlin, one line of code is fairly sufficient as shown in the example below: <br/> <br/>
               <span class="code code--inline"> data class User(var name: String, var age: Int) </span> 
              </td>
            </tr>
            <tr>
              <td>Extension functions</td>
              <td>In Java, if we want to add a new funtionnality to a class, we will have to inherit from this class or use the <a href="https://www.journaldev.com/1540/decorator-design-pattern-in-java-example" target="_blank">Decorator </a> design pattern. So the goal in Kotlin is to not modify the source code of the class we want to extend by adding new members but rather create new functions that we can call using this class objects, those functions are called extension functions.</td>
            </tr>
             <tr>
              <td>Immutability</td>
              <td>Like in Java, we use the keyword <b>final</b> if we want to declare a variable that won't be reassigned later. In Kotlin, there are the <b>var</b> and <b>val</b> keywords to manage the immutability of a property. So a property declared with <b>var</b> has a setter and a getter (mutable) while a property declared with <b>val</b> has a getter and a private setter (immutable) and the difference between final and val is that val is thread safe.</td>
            </tr>
             <tr>
              <td>Lambda expressions </td>
              <td>Even the latest Android version supports only java 7 and lambda expressions were added until Java 8 so that's why Kotlin developers added lambdas support to Kotlin to resolve this problem.<br/> <b>Lambda expressions</b> are anonymous functions that can be passed in an argument of another function.</td>
            </tr>
              <tr>
              <td>Null safety</td>
              <td>One of the common exceptions thrown in Java is the <b>NullPointerException</b> so Kotlin makes all types non-nullable by default so if a developer needs to use variables that hold a null value, it has to be declared as a null value like this :<br/>
              <span class="code code--inline"> var toto: String?</span> <br/>
              so if we want to access toto, the compiler will do a null check on the nullable variable.
             </td>
            </tr>
              <!-- <tr>
              <td>Coroutines</td>
              <td>Render table with Scribbler’s pretty table style.</td>
            </tr> -->
            <tr>
              <td>Type aliases </td>
              <td>This feature improves the code readibility by assigning a name to a complex type.
                 <div class="code__block code__block--notabs">
                  <pre class="code code--block">
                    <code>
                      typealias Credentials = Map<UserName, PasswordHash>
                      fun useCrd(crd: Credentials) {
                                  // @TODO
                              }
                    </code>
                  </pre>
                </div> 

              </td>
            </tr>
            <tr>
              <td>Anko </td>
              <td>I'm specifically interested in the <b>Anko layouts</b> which is a DSL that allows us to build UI's with zero XML code. For example, to create a fieldtext and a button with a listener with Kotlin, we can write the code below instead of creating the XML layout and then binding the view and the data in  a Java class:
               <div class="code__block code__block--notabs">
                  <pre class="code code--block">
                    <code>
                      verticalLayout {
                              val name = editText()
                              button("What's your name?") {
                                  onClick { toast("Hello, ${name.text}!") }
                              }
                          }
                    </code>
                  </pre>
                </div> 
                </td>
            </tr>
          </table>
          <p>Now that we've actually seen some code features and functionnalities that were added in Kotlin we must however test the performances of the language when it comes to rapidity and its behaviour in different use cases and that's what we will represent in the next section.</p>
          <hr />
        </section>
        <section class="js-section">
          <h3 class="section__title">Performances</h3>
          <p>In this section, I will try to mention the most remarquable aspects that would make an Android application that is based on Java different from the one based on Kotlin:</p>
        <div class="feature">
        <div class="feature__item">
          <h3 class="section__title">Code size:</h3>
          <p>According to previous features we can say that Kotlin requires much less lines of code so for example,a java application that has 5,491 methods and 12,371 lines of code was reduced to  to 4,987 methods and  8,564 lines of code after converting it to Kotlin.</p>
        </div>
        <div class="feature__item">
          <h3 class="section__title">Build speed:</h3>
        </div>
        <h5>1. Clean builds</h5>
          <p>We will be testing with these two scenarios after 10 consecutive builds:<br>
            <ul>
              <li> Execute without Gradle daemon (worst case scenario) : Java compiles 17% faster than Kotlin.
                <img src="img/sc1.png" width="500" height="300"/>
              </li>
              <li> Execute while Gradle daemon activated : Java compiles 13% faster than Kotlin.
                <img src="img/sc2.png" width="500" height="300"/>
              </li>
            </ul>
             
          </p>
        </div>
          <h5>2. Incremental builds</h5>
          <ul><li>In general, while activating incremental builds after few executions, Kotlin's compilation becomes slightly faster than Java. In conclusion, the most common scenario for developers is the incremental build so we notice that Koltin is not less faster than Java.
               <img src="img/sc5.png" width="500" height="300"/><br/>
          Ten consecutive incremental builds with one core file changed.

          </li>
         </ul>

           
          </p>
          <div class="feature__item">
             <h3 class="section__title">Test application:</h3>
          </div>
            <p>I chose 3 common use cases to test an android app based on Java and Kotlin according to 3 criterias: easy, support and performance and I gave each one a grade on 10. I chose some simple parts of a friend's app and is still in progress which is based on java and I converted those parts to Kotlin code and tested it out.</p>

                <img src="test_app/item-list.jpg" width="220" height="400"/>
                <img src="test_app/meeting.jpg" width="220" height="400"/>
                <img src="test_app/inter_card.jpg" width="220" height="400"/>

            
        <h5>Java</h5>
         <table id="customers">
            <tr>
              <th>Use case</th>
              <th>Easy</th>
              <th>Support</th>
              <th>Performance</th>
            </tr>
            <tr>
            <td>Item List</td>
              <td>7/10</td>
              <td>9/10</td>
              <td>9/10</td>
            </tr>
            <tr>
           <td>Interactive card</td>
              <td>7/10</td>
              <td>9/10</td>
              <td>8/10</td>
            </tr>
            <tr>
            <td>Meeting schedular</td>
              <td>7/10</td>
              <td>9/10</td>
              <td>8/10</td>
            </tr>
          </table>
          <h5>Kotlin</h5>
         <table id="customers">
            <tr>
              <th>Use case</th>
              <th>Easy</th>
              <th>Support</th>
              <th>Performance</th>

            </tr>
            <tr>
              <td>Item List</td>
              <td>8,5/10</td>
              <td>8/10</td>
              <td>7/10</td>
            </tr>
            <tr>
              <td>Interactive card</td>
              <td>8,5/10</td>
              <td>8/10</td>
              <td>6/10</td>

            </tr>
            <tr>
              <td>Meeting schedular</td>
              <td>8,5/10</td>
              <td>8/10</td>
              <td>6/10</td>
            </tr>
          </table>
          <h5>Conclusion</h5>
          <p>We notice that in these use cases code compiles slower while using kotlin but it becomes faster with incremental build so I decided to keep the results of the first compilation attempt. When it comes to code size, Kotlin requires less code than Java so that's why I increased the Kotlin's score on the 'Easy' column. And lastly, when it comes to the developers community of both languages, I gave a slighlty lesser score to Kotlin because its community is still sparse compared to Java. Therefore, documentation, tutorials or information about Kotlin are still not handy.</p>
          <hr />
        </section>
        <section class="js-section">
          <h3 class="section__title">Paradigms</h3>
          
          <h5>Object oriented programming</h5>
          <p>OOP is based on three main concepts: encapsulation, inheritance and polymorphism while the main character is the <b>object</b>, it belongs to the <b>imperative</b> family</p>.
          <h5>Functionnal programming</h5>
          <p>Functionnal programming is based on composing pure functions, avoiding shared state, mutable data, and side-effects, it belongs to the <b>declarative</b> family </p>
          <img src="img/fp_oop.png" width="500" height="300"/><br/>

          <span style="font-size:10px;">Src:https://dzone.com/articles/object-oriented-programming-strikes-back</span>
          <p>In general, Object oriented programming says that bringing together data and its behaviour in a single location makes it easier to understand how a program works. FP says that data and behaviour are distinctively different things and should be kept separate for clarity. In our case, Java has always been an object oriented programming language until Java 8 and it started slightly to borrow some functionnal programming styles with lambda expressions for instance.</p>
          <p>But the problem is that android support only Java 7 so that's why Kotlin creators decided to bring more functionnal programming into Kotlin which makes it an Object Oriented language with a bit of a  functionnal programming style.</p>
          <p>A side note about <b>lambda expressions</b> for those who are not familiar with this concept. Let's start with an example of a simple lambda expression:</p>

                <div class="code__block code__block--notabs">
                  <pre class="code code--block">
                    <code>
                     listOfDrinks.stream()
                         .filter(arg -> arg.getDrink() == WATER)
                         .collect(Collectors.toList());
                    </code>
                  </pre>
                </div>
          <p>
          The stream function creates a stream out of our collection "listOfDrinks" and then its filtered such as each element of the list is represented by an argument 'arg' and finally we collect the results in a list again, this terminal action is necessary in lambda expressions.</p>
          <p>And no, abusing of the use of lambda expressions does not mean that it is a functionnal programming, it would more like respecting the immutability of the state for instance everytime a function is called, the same input must return the same output. <b>So does that make Kotlin a functionnal programming language?</b></p>
          <p>Definitely not.</p>
          <p>it still lacks some of the most important features like <a href="https://stackoverflow.com/questions/6246719/what-is-a-higher-kinded-type-in-scala">Higher Kinded Types</a> and <a href="https://en.wikipedia.org/wiki/Type_class">Typeclasses</a> but the goal isn't to switch to FP but rather just take advantage of some of its useful features like inline functions.</p>

      </section>
         <section class="js-section">
          <h3 class="section__title">Conclusion</h3>
          <p>I guess after invoking these different aspects, we can now say that Kotlin is probably the best for Android applications as it seems more concise and progressive and for a language that just started it has quite plenty of ressources on the internet and an ethusiastic community. Neverthless, I still think for a good programming grasp of concepts, it is likable to learn and be comfortable with Java before moving to Kotlin.</p>
          
        </section>

        <section class="js-section">
          <h3 class="section__title">Credits</h3>
          <p>I was inspired by these sources:</p>
          <ul>
          <li><a href="https://medium.com/keepsafe-engineering/kotlin-vs-java-compilation-speed-e6c174b39b5d" target="_blank">keepsafe-engineering</a>
          </li>
            <li><a href="https://arctouch.com/2017/05/kotlin-vs-java/" target="_blank">arctouch</a></li>
            <li><a href="http://blog.erlem.fr/programmation/langage/java/11-petite-historique-du-langage-java" target="_blank">blog.erlem</a>
            </li>
            <li><a href="https://www.supinfo.com/articles/single/6088-kotlin-nouveau-langage-android" target="_blank">supinfo</a>
            </li>
            <li><a href="https://medium.com/@FreddieWang/why-we-use-kotlin-in-our-android-project-1be7847bd1fa" target="_blank">medium.com (why-we-use-kotlin)</a>
            </li>
            <li><a href="https://kotlinlang.org/docs/reference/extensions.html" target="_blank">kotlinlang.org</a></li>
            <li><a href="https://medium.com/@JorgeCastilloPr/kotlin-functional-programming-does-it-make-sense-36ad07e6bacf" target="_blank">medium.com (kotlin-functional-programming)</a></li>
            <li><a href="https://www.youtube.com/watch?v=X1RVYt2QKQE" target="_blank">Google I/O 2017</a></li>


          </ul>
          
        </section>
      </article>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="scribbler.js"></script>
  </body>
</html>